# 分享统计组件 (ShareStats.vue)

## 功能概述

分享统计组件用于显示分享链接的详细访问统计信息，包括：

### 主要功能
1. **统计概览卡片** - 显示总访问次数、独立访客、最后访问时间和首次访问时间
2. **安全提醒** - 当访问量异常时显示安全警告
3. **访问趋势图表** - 显示最近7/14/30天的访问趋势
4. **详细统计** - 按浏览器、操作系统、地理位置分类的统计信息
5. **交互式图表** - 支持鼠标悬停显示详细信息

## 组件属性

| 属性名 | 类型 | 默认值 | 描述 |
|--------|------|--------|------|
| `tokenId` | `string` | 必需 | 分享令牌ID |
| `visible` | `boolean` | `true` | 组件是否可见 |

## 组件事件

| 事件名 | 参数 | 描述 |
|--------|------|------|
| `close` | 无 | 关闭统计对话框 |
| `viewAccessRecords` | `tokenId: string` | 查看访问记录 |
| `revokeShare` | `tokenId: string` | 撤销分享 |

## 安全功能

### 异常访问检测
- 当总访问次数超过100次且独立访客少于总访问次数的30%时，显示安全提醒
- 提供快速查看访问记录和撤销分享的按钮

## 图表功能

### 访问趋势图表
- 支持选择不同时间段（7天、14天、30天）
- 使用SVG绘制的响应式图表
- 包含网格线、数据点和坐标轴标签
- 鼠标悬停显示详细信息的工具提示

## 详细统计标签页

### 浏览器统计
- 显示不同浏览器的访问次数和百分比
- 可视化进度条显示

### 操作系统统计
- 显示不同操作系统的访问次数和百分比
- 可视化进度条显示

### 地理位置统计
- 显示不同国家/地区的访问次数和百分比
- 支持显示城市级别的详细信息

## 响应式设计

- 支持桌面、平板和手机设备
- 自适应布局和字体大小
- 触摸友好的交互设计

## 无障碍性支持

- 支持键盘导航
- 高对比度模式
- 减少动画选项
- 语义化HTML结构

## 技术实现

### 依赖项
- Vue 3 Composition API
- TypeScript
- Pinia (状态管理)
- 现有项目样式系统

### 性能优化
- 计算属性缓存
- 懒加载统计数据
- SVG图表渲染优化

## 集成方式

### 在ShareManagement.vue中使用
```vue
<ShareStats
  :token-id="selectedStatsTokenId"
  :visible="showStatsDialog"
  @view-access-records="viewAccessRecords"
  @revoke-share="handleRevokeFromStats"
/>
```

## 样式定制

组件使用项目现有的设计系统，包括：
- 颜色变量
- 间距系统
- 字体层级
- 阴影效果

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 注意事项

1. 需要确保 `shareStore.fetchShareStats` 方法已正确实现
2. 组件依赖于后端提供的统计数据API
3. 图表数据为空时会显示友好的空状态
4. 加载状态使用现有的 `LoadingSpinner` 组件

## 后续改进

- 添加导出统计报告功能
- 支持自定义时间段筛选
- 添加更多图表类型（饼图、柱状图等）
- 实现数据对比功能