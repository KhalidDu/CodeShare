# 常见问题 (FAQ)

## 目录

1. [一般问题](#一般问题)
2. [安装和部署](#安装和部署)
3. [用户账户和权限](#用户账户和权限)
4. [代码片段管理](#代码片段管理)
5. [搜索和筛选](#搜索和筛选)
6. [版本管理](#版本管理)
7. [标签系统](#标签系统)
8. [剪贴板功能](#剪贴板功能)
9. [性能和限制](#性能和限制)
10. [安全相关](#安全相关)
11. [故障排除](#故障排除)
12. [开发相关](#开发相关)

## 一般问题

### Q: 什么是代码片段管理工具？

A: 代码片段管理工具是一个支持团队协作的代码片段存储、管理和分享平台。它允许开发者存储常用的代码片段，通过标签进行分类，支持版本控制，并提供便捷的搜索和复制功能。

### Q: 这个工具适合哪些用户？

A: 适合以下用户：
- 个人开发者：管理个人代码片段库
- 开发团队：共享团队常用代码模式
- 技术主管：建立团队知识库
- 学习者：收集和整理学习资料

### Q: 支持哪些编程语言？

A: 支持所有主流编程语言的语法高亮，包括但不限于：
- JavaScript/TypeScript
- Python
- Java
- C#/C/C++
- Go
- Rust
- PHP
- Ruby
- Swift
- Kotlin
- HTML/CSS
- SQL
- Shell/Bash

### Q: 是否支持私有部署？

A: 是的，完全支持私有部署。提供 Docker、Kubernetes 和传统服务器部署方式。详见 [部署文档](deployment.md)。

## 安装和部署

### Q: 系统最低配置要求是什么？

A: **最低配置**：
- CPU: 2 核心
- 内存: 4GB RAM
- 存储: 20GB 可用空间
- 数据库: MySQL 8.0+

**推荐配置**：
- CPU: 4 核心或更多
- 内存: 8GB RAM 或更多
- 存储: 50GB SSD

### Q: 如何快速部署？

A: 使用 Docker Compose 是最快的部署方式：

```bash
# 克隆项目
git clone https://github.com/your-org/codesnippet-manager.git
cd codesnippet-manager

# 配置环境变量
cp .env.example .env.production
# 编辑 .env.production 文件

# 一键部署
./scripts/deploy.sh production
```

### Q: 支持哪些数据库？

A: 目前仅支持 MySQL 8.0+。我们选择 MySQL 是因为：
- 成熟稳定，广泛使用
- 优秀的性能表现
- 完善的工具生态
- 良好的 UTF8MB4 支持

### Q: 可以在 Windows 上部署吗？

A: 可以。支持以下方式：
- Docker Desktop for Windows
- Windows Server + IIS
- Windows Subsystem for Linux (WSL)

### Q: 如何升级到新版本？

A: 使用部署脚本自动升级：

```bash
# 拉取最新代码
git pull origin main

# 自动升级
./scripts/deploy.sh production

# 或手动升级
docker-compose -f docker-compose.prod.yml pull
docker-compose -f docker-compose.prod.yml up -d
```

## 用户账户和权限

### Q: 默认管理员账户是什么？

A: 默认管理员账户：
- 用户名：`admin`
- 密码：`admin123`

**重要**：首次登录后请立即修改密码！

### Q: 有哪些用户角色？

A: 系统有三种用户角色：

1. **查看者 (Viewer)**：
   - 查看和复制公开的代码片段
   - 查看自己的剪贴板历史

2. **编辑者 (Editor)**：
   - 查看者的所有权限
   - 创建、编辑、删除自己的代码片段
   - 管理自己的标签

3. **管理员 (Admin)**：
   - 编辑者的所有权限
   - 查看、编辑、删除任意代码片段
   - 用户管理和系统设置

### Q: 如何重置用户密码？

A: 管理员可以重置任意用户密码：

1. 登录管理员账户
2. 进入"用户管理"页面
3. 找到目标用户，点击"重置密码"
4. 输入新密码或使用系统生成的密码
5. 将新密码告知用户

### Q: 忘记密码怎么办？

A: 目前没有自助密码重置功能，请联系系统管理员重置密码。

### Q: 可以集成 LDAP 或 Active Directory 吗？

A: 当前版本不支持，但已在开发计划中。预计在 v1.2.0 版本中提供企业级认证集成。

## 代码片段管理

### Q: 代码片段有大小限制吗？

A: 是的，有以下限制：
- 单个代码片段最大 1MB
- 标题最长 200 字符
- 描述最长 1000 字符
- 每个片段最多 50 个标签

### Q: 如何批量导入代码片段？

A: 当前版本不支持批量导入功能，需要逐个创建。批量导入功能计划在 v1.1.0 版本中提供。

### Q: 删除的代码片段可以恢复吗？

A: 不可以。删除操作是永久性的，无法恢复。建议在删除前：
- 确认不再需要该片段
- 如有必要，先导出或备份重要内容

### Q: 如何分享代码片段给其他人？

A: 有几种方式：

1. **设为公开**：将片段设置为公开，其他用户可以查看和复制
2. **复制链接**：复制片段详情页面的 URL 分享
3. **导出功能**：手动复制代码内容分享（计划添加导出功能）

### Q: 支持代码片段模板吗？

A: 当前版本不支持模板功能，但可以通过以下方式实现类似效果：
- 创建常用的代码框架作为片段
- 使用特定标签（如 "template"）进行分类
- 复制后根据需要修改

## 搜索和筛选

### Q: 搜索功能支持哪些内容？

A: 搜索功能支持：
- 代码片段标题
- 代码片段描述
- 代码内容
- 标签名称
- 创建者用户名

### Q: 支持正则表达式搜索吗？

A: 当前版本不支持正则表达式搜索，仅支持关键词匹配。高级搜索功能计划在后续版本中提供。

### Q: 如何提高搜索效率？

A: 建议：
- 使用具体的关键词
- 合理使用标签分类
- 结合多个筛选条件
- 使用语言筛选缩小范围
- 定期整理和更新代码片段

### Q: 搜索结果如何排序？

A: 搜索结果按以下优先级排序：
1. 标题匹配度
2. 描述匹配度
3. 代码内容匹配度
4. 最后更新时间
5. 查看次数

## 版本管理

### Q: 版本是如何创建的？

A: 版本自动创建：
- 每次保存代码片段时自动创建新版本
- 保留完整的历史记录
- 记录修改时间和修改者

### Q: 版本历史有数量限制吗？

A: 默认保留所有版本历史。管理员可以配置：
- 最大版本数量（默认无限制）
- 自动清理策略（可选）

### Q: 如何比较不同版本？

A: 在代码片段详情页面：
1. 点击"版本历史"标签
2. 选择要比较的两个版本
3. 点击"比较"按钮
4. 系统会高亮显示差异

### Q: 恢复版本会覆盖当前版本吗？

A: 不会覆盖。恢复版本会：
- 创建一个新的当前版本
- 内容为选定的历史版本
- 保留所有历史记录

## 标签系统

### Q: 标签有什么限制？

A: 标签限制：
- 标签名称最长 50 字符
- 每个代码片段最多 50 个标签
- 标签名称不能重复
- 支持中文、英文、数字和常见符号

### Q: 如何管理标签颜色？

A: 在标签管理页面：
1. 点击标签的颜色块
2. 选择预设颜色或输入自定义颜色代码
3. 保存更改

### Q: 删除标签会影响代码片段吗？

A: 是的。删除标签会：
- 从所有使用该标签的代码片段中移除
- 不会删除代码片段本身
- 操作不可撤销

### Q: 可以合并标签吗？

A: 当前版本不支持标签合并功能。如需合并：
1. 创建新标签
2. 手动更新相关代码片段
3. 删除旧标签

## 剪贴板功能

### Q: 剪贴板历史保存多长时间？

A: 默认设置：
- 最多保存 100 条记录
- 自动清理 30 天前的记录
- 管理员可以调整这些设置

### Q: 复制功能在所有浏览器都能工作吗？

A: 现代浏览器都支持，但有一些限制：
- 需要 HTTPS 环境（生产环境）
- 某些旧版本浏览器可能不支持
- 如果复制失败，会提供手动选择复制的选项

### Q: 剪贴板历史会同步到其他设备吗？

A: 不会。剪贴板历史是基于用户账户的，但不会跨设备同步。每个设备/浏览器的历史是独立的。

### Q: 如何清理剪贴板历史？

A: 在剪贴板历史页面：
1. 点击"清理历史"按钮
2. 选择清理选项：
   - 清理全部历史
   - 清理 30 天前的记录
   - 清理 7 天前的记录
3. 确认操作

## 性能和限制

### Q: 系统支持多少用户同时使用？

A: 取决于服务器配置：
- 最小配置：约 50-100 并发用户
- 推荐配置：约 500-1000 并发用户
- 可通过负载均衡扩展到更多用户

### Q: 数据库可以存储多少代码片段？

A: 理论上没有限制，实际取决于：
- 服务器存储空间
- 数据库性能
- 单个片段大小

建议定期清理不需要的片段和版本历史。

### Q: 如何优化系统性能？

A: 性能优化建议：

**数据库层面**：
- 定期优化数据库表
- 添加适当的索引
- 清理过期数据

**应用层面**：
- 启用响应缓存
- 使用 CDN 加速静态资源
- 优化查询逻辑

**服务器层面**：
- 增加内存和 CPU
- 使用 SSD 存储
- 配置负载均衡

### Q: 系统有请求频率限制吗？

A: 是的，为防止滥用：
- 默认：每分钟 1000 次请求
- 认证端点：每分钟 50 次请求
- 写操作：每分钟 200 次请求

超出限制会返回 429 错误。

## 安全相关

### Q: 系统有哪些安全措施？

A: 主要安全措施：

**认证和授权**：
- JWT Token 认证
- 基于角色的权限控制
- 密码哈希存储

**输入安全**：
- XSS 防护
- SQL 注入防护
- 输入验证和清理

**传输安全**：
- HTTPS 强制使用
- 安全头配置
- CSRF 防护

**访问控制**：
- 请求频率限制
- IP 白名单（可选）
- 会话管理

### Q: 如何确保代码片段的安全？

A: 安全建议：
- 不要存储敏感信息（密码、密钥等）
- 使用私有片段存储内部代码
- 定期审查公开片段
- 设置适当的用户权限

### Q: 支持双因素认证吗？

A: 当前版本不支持，但已在开发计划中。预计在 v1.2.0 版本中提供。

### Q: 如何备份数据？

A: 建议的备份策略：

**数据库备份**：
```bash
# 每日自动备份
mysqldump -u user -p CodeSnippetManager > backup_$(date +%Y%m%d).sql
```

**配置文件备份**：
```bash
# 备份配置文件
tar -czf config_backup.tar.gz appsettings.json nginx.conf
```

**定期测试恢复**：
- 定期验证备份文件完整性
- 测试恢复流程

## 故障排除

### Q: 无法登录系统怎么办？

A: 排查步骤：

1. **检查用户名和密码**
2. **检查网络连接**
3. **清除浏览器缓存和 Cookie**
4. **检查服务器状态**：
   ```bash
   # 检查后端服务
   curl http://localhost:5000/health
   
   # 检查数据库连接
   mysql -u user -p -h localhost
   ```
5. **查看错误日志**

### Q: 代码片段无法保存怎么办？

A: 可能原因和解决方案：

1. **内容过大**：检查是否超过 1MB 限制
2. **网络问题**：检查网络连接
3. **权限不足**：确认有编辑权限
4. **服务器错误**：查看服务器日志

### Q: 搜索功能不工作怎么办？

A: 排查步骤：

1. **检查搜索关键词**：确保关键词正确
2. **清除筛选条件**：重置所有筛选器
3. **检查权限**：确认有查看权限
4. **重新加载页面**：刷新浏览器

### Q: 复制功能失效怎么办？

A: 解决方案：

1. **检查浏览器支持**：使用现代浏览器
2. **确保 HTTPS**：在安全环境下使用
3. **手动复制**：使用备用的手动选择复制
4. **检查权限**：确认浏览器剪贴板权限

### Q: 如何查看系统日志？

A: 日志位置：

**Docker 部署**：
```bash
# 后端日志
docker logs codesnippet-backend

# 前端日志
docker logs codesnippet-frontend

# 数据库日志
docker logs codesnippet-mysql
```

**传统部署**：
```bash
# 应用日志
sudo journalctl -u codesnippet-backend -f

# Nginx 日志
sudo tail -f /var/log/nginx/error.log

# MySQL 日志
sudo tail -f /var/log/mysql/error.log
```

## 开发相关

### Q: 如何搭建开发环境？

A: 详细步骤请参考 [开发者文档](developer-guide.md)。

简要步骤：
1. 安装 .NET 8 SDK 和 Node.js 20+
2. 克隆项目代码
3. 配置数据库
4. 启动后端和前端服务

### Q: 如何贡献代码？

A: 贡献流程：
1. Fork 项目到个人账户
2. 创建功能分支
3. 编写代码和测试
4. 提交 Pull Request
5. 等待代码审查

详见 [贡献指南](../CONTRIBUTING.md)。

### Q: 如何报告 Bug？

A: 在 [GitHub Issues](https://github.com/your-org/codesnippet-manager/issues) 创建 Bug 报告，请包含：
- 详细的问题描述
- 重现步骤
- 环境信息
- 错误截图或日志

### Q: 如何请求新功能？

A: 在 [GitHub Discussions](https://github.com/your-org/codesnippet-manager/discussions) 或 Issues 中提出功能请求，请说明：
- 功能描述
- 使用场景
- 预期效果

### Q: 项目使用什么开源许可证？

A: 项目使用 [MIT 许可证](../LICENSE)，允许自由使用、修改和分发。

## 获得帮助

如果您的问题在此 FAQ 中没有找到答案：

1. **查看文档**：
   - [用户手册](user-guide.md)
   - [管理员指南](admin-guide.md)
   - [开发者文档](developer-guide.md)

2. **搜索现有问题**：
   - [GitHub Issues](https://github.com/your-org/codesnippet-manager/issues)
   - [GitHub Discussions](https://github.com/your-org/codesnippet-manager/discussions)

3. **联系支持**：
   - 技术支持：support@your-domain.com
   - 社区讨论：[Discord 服务器](https://discord.gg/your-server)

4. **创建新问题**：
   - 如果是 Bug，创建 Issue
   - 如果是使用问题，创建 Discussion

我们会尽快回复您的问题！